// Nextflow configuration file for Unified RNA-seq Pipeline v2
params {
    // Input files
    input = "params/samples.csv"

    // Output directory
    output_dir = "results"

    // Reference files
    reference_genome = "params/GRCh38.primary_assembly.genome.fa"
    reference_gtf = "params/gencode.v47.chr_patch_hapl_scaff.annotation.gtf"

    // GMT files
    hallmark_gmt = "params/h.all.v2023.2.Hs.symbols.gmt"
    reactome_gmt = "params/c2.cp.reactome.v2024.1.Hs.symbols.gmt"

    // Functional Annotation Files (Isoform Switching Part 2)
    cpat_hexamer = "params/Human_Hexamer.tsv"
    cpat_logit   = "params/Human_logitModel.RData"
    pfam_db      = "params/Pfam-A.hmm"

    // Research aim toggles
    run_aim1 = true    // Normal tissue comparison
    run_aim2 = true    // Cancer tissue comparison

    // Technology toggles
    run_short_read = true
    run_long_read = true
}

// Execution profiles
profiles {
    slurm {
        process.executor = 'slurm'
        process.cpus = 16
        process.memory = '72 GB'
        process.time = '48h'
        process.clusterOptions = '--partition=nodes'
    }

    // Run profiles
    // Aims
    aim1_only {
        params.run_aim1 = true
        params.run_aim2 = false
        params.output_dir = 'results/aim1_normal_comparison'
    }

    aim2_only {
        params.run_aim1 = false
        params.run_aim2 = true
        params.output_dir = 'results/aim2_cancer_comparison'
    }

    // Technology
    short_only {
        params.run_short_read = true
        params.run_long_read = false
    }

    long_only {
        params.run_short_read = false
        params.run_long_read = true
    }
}

// Singularity
singularity {
    enabled = true
    autoMounts = true
    runOptions = "--bind /mnt/scratch/projects/biol-cancerinf-2020/Mason-Lab-Code/Rlibs/4.2.1:/r_libs"
}

// Reporting
trace {
    enabled = true
    file = "${params.output_dir}/pipeline_trace.txt"
    fields = 'task_id,hash,name,status,exit,realtime,%cpu,%mem,rss,peak_rss,vmem,peak_vmem'
    overwrite = true
}

report {
    enabled = true
    file = "${params.output_dir}/execution_report.html"
    overwrite = true
}

timeline {
    enabled = true
    file = "${params.output_dir}/timeline_report.html"
    overwrite = true
}
